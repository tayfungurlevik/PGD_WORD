{"version":3,"sources":["../src/components/TableHeaderCell/useTableHeaderCell.tsx"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, useMergedRefs, slot } from '@fluentui/react-utilities';\nimport { useFocusWithin } from '@fluentui/react-tabster';\nimport { ArrowUpRegular, ArrowDownRegular } from '@fluentui/react-icons';\nimport { ARIAButtonSlotProps, useARIAButtonProps } from '@fluentui/react-aria';\nimport type { TableHeaderCellProps, TableHeaderCellState } from './TableHeaderCell.types';\nimport { useTableContext } from '../../contexts/tableContext';\n\nconst sortIcons = {\n  ascending: <ArrowUpRegular fontSize={12} />,\n  descending: <ArrowDownRegular fontSize={12} />,\n};\n\n/**\n * Create the state required to render TableHeaderCell.\n *\n * The returned state can be modified with hooks such as useTableHeaderCellStyles_unstable,\n * before being passed to renderTableHeaderCell_unstable.\n *\n * @param props - props from this instance of TableHeaderCell\n * @param ref - reference to root HTMLElement of TableHeaderCell\n */\nexport const useTableHeaderCell_unstable = (\n  props: TableHeaderCellProps,\n  ref: React.Ref<HTMLElement>,\n): TableHeaderCellState => {\n  const { noNativeElements, sortable: contextSortable } = useTableContext();\n  const { sortable = contextSortable } = props;\n\n  const rootComponent = props.as ?? noNativeElements ? 'div' : 'th';\n\n  const buttonSlot = slot.always<ARIAButtonSlotProps>(props.button, {\n    elementType: 'div',\n    defaultProps: {\n      as: 'div',\n      ...(!sortable && {\n        role: 'presentation',\n        tabIndex: undefined,\n      }),\n    },\n  });\n\n  return {\n    components: {\n      root: rootComponent,\n      button: 'div',\n      sortIcon: 'span',\n      aside: 'span',\n    },\n    root: slot.always(\n      getIntrinsicElementProps(rootComponent, {\n        // FIXME:\n        // `ref` is wrongly assigned to be `HTMLElement` instead of `HTMLDivElement`\n        // but since it would be a breaking change to fix it, we are casting ref to it's proper type\n        ref: useMergedRefs(ref, useFocusWithin()) as React.Ref<HTMLDivElement>,\n        role: rootComponent === 'div' ? 'columnheader' : undefined,\n        'aria-sort': sortable ? props.sortDirection ?? 'none' : undefined,\n        ...props,\n      } as const),\n      { elementType: rootComponent },\n    ),\n    aside: slot.optional(props.aside, { elementType: 'span' }),\n    sortIcon: slot.optional(props.sortIcon, {\n      renderByDefault: !!props.sortDirection,\n      defaultProps: { children: props.sortDirection ? sortIcons[props.sortDirection] : undefined },\n      elementType: 'span',\n    }),\n    button: useARIAButtonProps(buttonSlot.as, buttonSlot),\n    sortable,\n    noNativeElements,\n  };\n};\n"],"names":["React","getIntrinsicElementProps","useMergedRefs","slot","useFocusWithin","ArrowUpRegular","ArrowDownRegular","useARIAButtonProps","useTableContext","sortIcons","ascending","fontSize","descending","useTableHeaderCell_unstable","props","ref","noNativeElements","sortable","contextSortable","rootComponent","as","buttonSlot","always","button","elementType","defaultProps","role","tabIndex","undefined","components","root","sortIcon","aside","sortDirection","optional","renderByDefault","children"],"mappings":";;;;+BAsBaa;;;;;;;iEAtBU,QAAQ;gCAC+B,4BAA4B;8BAC3D,0BAA0B;4BACR,wBAAwB;2BACjB,uBAAuB;8BAE/C,8BAA8B;AAE9D,MAAMJ,YAAY;IAChBC,WAAAA,WAAAA,GAAW,OAAA,aAAA,CAACL,0BAAAA,EAAAA;QAAeM,UAAU;;IACrCC,YAAAA,WAAAA,GAAY,OAAA,aAAA,CAACN,4BAAAA,EAAAA;QAAiBK,UAAU;;AAC1C;AAWO,oCAAoC,CACzCG,OACAC;IAEA,MAAM,EAAEC,gBAAgB,EAAEC,UAAUC,eAAe,EAAE,OAAGV,6BAAAA;IACxD,MAAM,EAAES,WAAWC,eAAe,EAAE,GAAGJ;QAEjBA;IAAtB,MAAMK,gBAAgBL,CAAAA,CAAAA,YAAAA,MAAMM,EAAAA,AAAE,MAAA,QAARN,cAAAA,KAAAA,IAAAA,YAAYE,gBAAAA,CAAe,GAAI,QAAQ;IAE7D,MAAMK,aAAalB,oBAAAA,CAAKmB,MAAM,CAAsBR,MAAMS,MAAM,EAAE;QAChEC,aAAa;QACbC,cAAc;YACZL,IAAI;YACJ,GAAI,CAACH,YAAY;gBACfS,MAAM;gBACNC,UAAUC;YACZ,CAAC;QACH;IACF;QAgB8Bd;IAd9B,OAAO;QACLe,YAAY;YACVC,MAAMX;YACNI,QAAQ;YACRQ,UAAU;YACVC,OAAO;QACT;QACAF,MAAM3B,oBAAAA,CAAKmB,MAAM,CACfrB,4CAAAA,EAAyBkB,eAAe;YACtC,SAAS;YACT,4EAA4E;YAC5E,4FAA4F;YAC5FJ,SAAKb,6BAAAA,EAAca,SAAKX,4BAAAA;YACxBsB,MAAMP,kBAAkB,QAAQ,iBAAiBS;YACjD,aAAaX,WAAWH,CAAAA,uBAAAA,MAAMmB,aAAAA,AAAa,MAAA,QAAnBnB,yBAAAA,KAAAA,IAAAA,uBAAuB,SAASc;YACxD,GAAGd,KAAK;QACV,IACA;YAAEU,aAAaL;QAAc;QAE/Ba,OAAO7B,oBAAAA,CAAK+B,QAAQ,CAACpB,MAAMkB,KAAK,EAAE;YAAER,aAAa;QAAO;QACxDO,UAAU5B,oBAAAA,CAAK+B,QAAQ,CAACpB,MAAMiB,QAAQ,EAAE;YACtCI,iBAAiB,CAAC,CAACrB,MAAMmB,aAAa;YACtCR,cAAc;gBAAEW,UAAUtB,MAAMmB,aAAa,GAAGxB,SAAS,CAACK,MAAMmB,aAAa,CAAC,GAAGL;YAAU;YAC3FJ,aAAa;QACf;QACAD,YAAQhB,6BAAAA,EAAmBc,WAAWD,EAAE,EAAEC;QAC1CJ;QACAD;IACF;AACF,EAAE"}